var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function o(){return Object.create(null)}function r(t){t.forEach(n)}function s(t){return"function"==typeof t}function l(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}let c;function a(t,e){return c||(c=document.createElement("a")),c.href=e,t===c.href}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function u(t){const e="string"==typeof t&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const d="undefined"!=typeof window;let f=d?()=>window.performance.now():()=>Date.now(),p=d?t=>requestAnimationFrame(t):t;const m=new Set;function h(t){m.forEach((e=>{e.c(t)||(m.delete(e),e.f())})),0!==m.size&&p(h)}function g(t){let e;return 0===m.size&&p(h),{promise:new Promise((n=>{m.add(e={c:t,f:n})})),abort(){m.delete(e)}}}function v(t,e){t.appendChild(e)}function $(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function y(t){const e=x("style");return function(t,e){v(t.head||t,e),e.sheet}($(t),e),e.sheet}function b(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode&&t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function k(t){return document.createTextNode(t)}function q(){return k(" ")}function _(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function S(t){return function(e){return e.preventDefault(),t.call(this,e)}}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function E(t){return""===t?null:+t}function j(t,e){e=""+e,t.data!==e&&(t.data=e)}function z(t,e){t.value=null==e?"":e}function O(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function N(t,e,{bubbles:n=!1,cancelable:o=!1}={}){const r=document.createEvent("CustomEvent");return r.initCustomEvent(t,n,o,e),r}const P=new Map;let A,D=0;function M(t,e,n,o,r,s,l,c=0){const a=16.666/o;let i="{\n";for(let t=0;t<=1;t+=a){const o=e+(n-e)*s(t);i+=100*t+`%{${l(o,1-o)}}\n`}const u=i+`100% {${l(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${c}`,f=$(t),{stylesheet:p,rules:m}=P.get(f)||function(t,e){const n={stylesheet:y(e),rules:{}};return P.set(t,n),n}(f,t);m[d]||(m[d]=!0,p.insertRule(`@keyframes ${d} ${u}`,p.cssRules.length));const h=t.style.animation||"";return t.style.animation=`${h?`${h}, `:""}${d} ${o}ms linear ${r}ms 1 both`,D+=1,d}function I(t,e){const n=(t.style.animation||"").split(", "),o=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),r=n.length-o.length;r&&(t.style.animation=o.join(", "),D-=r,D||p((()=>{D||(P.forEach((t=>{const{ownerNode:e}=t.stylesheet;e&&w(e)})),P.clear())})))}function T(t){A=t}function L(){if(!A)throw new Error("Function called outside component initialization");return A}const R=[],J=[];let F=[];const G=[],V=Promise.resolve();let B=!1;function Y(t){F.push(t)}const U=new Set;let X,Z=0;function H(){if(0!==Z)return;const t=A;do{try{for(;Z<R.length;){const t=R[Z];Z++,T(t),K(t.$$)}}catch(t){throw R.length=0,Z=0,t}for(T(null),R.length=0,Z=0;J.length;)J.pop()();for(let t=0;t<F.length;t+=1){const e=F[t];U.has(e)||(U.add(e),e())}F.length=0}while(R.length);for(;G.length;)G.pop()();B=!1,U.clear(),T(t)}function K(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Y)}}function Q(){return X||(X=Promise.resolve(),X.then((()=>{X=null}))),X}function W(t,e,n){t.dispatchEvent(N(`${e?"intro":"outro"}${n}`))}const tt=new Set;let et;function nt(){et={r:0,c:[],p:et}}function ot(){et.r||r(et.c),et=et.p}function rt(t,e){t&&t.i&&(tt.delete(t),t.i(e))}function st(t,e,n,o){if(t&&t.o){if(tt.has(t))return;tt.add(t),et.c.push((()=>{tt.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}else o&&o()}const lt={duration:0};function ct(n,o,r){const l={direction:"in"};let c,a,i=o(n,r,l),u=!1,d=0;function p(){c&&I(n,c)}function m(){const{delay:o=0,duration:r=300,easing:s=e,tick:l=t,css:m}=i||lt;m&&(c=M(n,0,1,r,o,s,m,d++)),l(0,1);const h=f()+o,v=h+r;a&&a.abort(),u=!0,Y((()=>W(n,!0,"start"))),a=g((t=>{if(u){if(t>=v)return l(1,0),W(n,!0,"end"),p(),u=!1;if(t>=h){const e=s((t-h)/r);l(e,1-e)}}return u}))}let h=!1;return{start(){h||(h=!0,I(n),s(i)?(i=i(l),Q().then(m)):m())},invalidate(){h=!1},end(){u&&(p(),u=!1)}}}function at(n,o,l,c){const a={direction:"both"};let i=o(n,l,a),u=c?0:1,d=null,p=null,m=null;function h(){m&&I(n,m)}function v(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(o){const{delay:s=0,duration:l=300,easing:c=e,tick:a=t,css:$}=i||lt,y={start:f()+s,b:o};o||(y.group=et,et.r+=1),d||p?p=y:($&&(h(),m=M(n,u,o,l,s,c,$)),o&&a(0,1),d=v(y,l),Y((()=>W(n,o,"start"))),g((t=>{if(p&&t>p.start&&(d=v(p,l),p=null,W(n,d.b,"start"),$&&(h(),m=M(n,u,d.b,d.duration,0,c,i.css))),d)if(t>=d.end)a(u=d.b,1-u),W(n,d.b,"end"),p||(d.b?h():--d.group.r||r(d.group.c)),d=null;else if(t>=d.start){const e=t-d.start;u=d.a+d.d*c(e/d.duration),a(u,1-u)}return!(!d&&!p)})))}return{run(t){s(i)?Q().then((()=>{i=i(a),$(t)})):$(t)},end(){h(),d=p=null}}}function it(t,e,o,l){const{fragment:c,after_update:a}=t.$$;c&&c.m(e,o),l||Y((()=>{const e=t.$$.on_mount.map(n).filter(s);t.$$.on_destroy?t.$$.on_destroy.push(...e):r(e),t.$$.on_mount=[]})),a.forEach(Y)}function ut(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];F.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),F=e}(n.after_update),r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function dt(t,e){-1===t.$$.dirty[0]&&(R.push(t),B||(B=!0,V.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ft(e,n,s,l,c,a,i,u=[-1]){const d=A;T(e);const f=e.$$={fragment:null,ctx:[],props:a,update:t,not_equal:c,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(n.context||(d?d.$$.context:[])),callbacks:o(),dirty:u,skip_bound:!1,root:n.target||d.$$.root};i&&i(f.root);let p=!1;if(f.ctx=s?s(e,n.props||{},((t,n,...o)=>{const r=o.length?o[0]:n;return f.ctx&&c(f.ctx[t],f.ctx[t]=r)&&(!f.skip_bound&&f.bound[t]&&f.bound[t](r),p&&dt(e,t)),n})):[],f.update(),p=!0,r(f.before_update),f.fragment=!!l&&l(f.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);f.fragment&&f.fragment.l(t),t.forEach(w)}else f.fragment&&f.fragment.c();n.intro&&rt(e.$$.fragment),it(e,n.target,n.anchor,n.customElement),H()}T(d)}class pt{$destroy(){ut(this,1),this.$destroy=t}$on(e,n){if(!s(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function mt(t){const e=t-1;return e*e*e+1}function ht(t,{delay:n=0,duration:o=400,easing:r=e}={}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:o,easing:r,css:t=>"opacity: "+t*s}}function gt(t,{delay:e=0,duration:n=400,easing:o=mt,x:r=0,y:s=0,opacity:l=0}={}){const c=getComputedStyle(t),a=+c.opacity,i="none"===c.transform?"":c.transform,d=a*(1-l),[f,p]=u(r),[m,h]=u(s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${i} translate(${(1-t)*f}${p}, ${(1-t)*m}${h});\n\t\t\topacity: ${a-d*e}`}}function vt(t,{delay:e=0,duration:n=400,easing:o=mt,start:r=0,opacity:s=0}={}){const l=getComputedStyle(t),c=+l.opacity,a="none"===l.transform?"":l.transform,i=1-r,u=c*(1-s);return{delay:e,duration:n,easing:o,css:(t,e)=>`\n\t\t\ttransform: ${a} scale(${1-i*e});\n\t\t\topacity: ${c-u*e}\n\t\t`}}function $t(t){let e;return{c(){e=x("div"),C(e,"class","loading-spinner svelte-97oszj")},m(t,n){b(t,e,n)},d(t){t&&w(e)}}}function yt(e){let n,o,r;return{c(){n=x("p"),o=k(e[2]),C(n,"class","error-message svelte-97oszj")},m(t,e){b(t,n,e),v(n,o)},p(t,e){4&e&&j(o,t[2])},i(t){r||Y((()=>{r=ct(n,ht,{}),r.start()}))},o:t,d(t){t&&w(n)}}}function bt(e){let n,o,r,s;return{c(){n=k("Pas encore de compte ? "),o=x("span"),o.textContent="S'inscrire",C(o,"class","toggle-link svelte-97oszj")},m(t,l){b(t,n,l),b(t,o,l),r||(s=_(o,"click",e[6]),r=!0)},p:t,d(t){t&&w(n),t&&w(o),r=!1,s()}}}function wt(e){let n,o,r,s;return{c(){n=k("Déjà inscrit ? "),o=x("span"),o.textContent="Se connecter",C(o,"class","toggle-link svelte-97oszj")},m(t,l){b(t,n,l),b(t,o,l),r||(s=_(o,"click",e[6]),r=!0)},p:t,d(t){t&&w(n),t&&w(o),r=!1,s()}}}function xt(e){let n,o,s,l,c,a,i,u,d,f,p,m,h,g,$,y,E,O,N,P,A,D,M,I,T,L=e[4]?"Créer un compte":"Connexion",R=e[4]?"S'inscrire":"Se connecter",J=e[3]&&$t(),F=e[2]&&yt(e);function G(t,e){return t[4]?wt:bt}let V=G(e),B=V(e);return{c(){n=x("div"),o=x("h2"),s=k(L),l=q(),c=x("form"),a=x("div"),i=x("label"),i.textContent="Email :",u=q(),d=x("input"),f=q(),p=x("div"),m=x("label"),m.textContent="Mot de passe :",h=q(),g=x("input"),y=q(),E=x("button"),O=k(R),N=q(),J&&J.c(),P=q(),F&&F.c(),A=q(),D=x("div"),B.c(),C(i,"for","email"),C(d,"type","email"),C(d,"id","email"),d.required=!0,C(d,"autocomplete","email"),C(d,"placeholder","votre@email.com"),C(a,"class","form-group svelte-97oszj"),C(m,"for","password"),C(g,"type","password"),C(g,"id","password"),g.required=!0,C(g,"autocomplete",$=e[4]?"new-password":"current-password"),C(g,"placeholder","Votre mot de passe"),C(p,"class","form-group svelte-97oszj"),C(E,"type","submit"),E.disabled=e[3],C(D,"class","toggle-mode svelte-97oszj"),C(n,"class","auth-container svelte-97oszj")},m(t,r){b(t,n,r),v(n,o),v(o,s),v(n,l),v(n,c),v(c,a),v(a,i),v(a,u),v(a,d),z(d,e[0]),v(c,f),v(c,p),v(p,m),v(p,h),v(p,g),z(g,e[1]),v(c,y),v(c,E),v(E,O),v(c,N),J&&J.m(c,null),v(c,P),F&&F.m(c,null),v(n,A),v(n,D),B.m(D,null),I||(T=[_(d,"input",e[7]),_(g,"input",e[8]),_(c,"submit",S(e[5]))],I=!0)},p(t,[e]){16&e&&L!==(L=t[4]?"Créer un compte":"Connexion")&&j(s,L),1&e&&d.value!==t[0]&&z(d,t[0]),16&e&&$!==($=t[4]?"new-password":"current-password")&&C(g,"autocomplete",$),2&e&&g.value!==t[1]&&z(g,t[1]),16&e&&R!==(R=t[4]?"S'inscrire":"Se connecter")&&j(O,R),8&e&&(E.disabled=t[3]),t[3]?J||(J=$t(),J.c(),J.m(c,P)):J&&(J.d(1),J=null),t[2]?F?(F.p(t,e),4&e&&rt(F,1)):(F=yt(t),F.c(),rt(F,1),F.m(c,null)):F&&(F.d(1),F=null),V===(V=G(t))&&B?B.p(t,e):(B.d(1),B=V(t),B&&(B.c(),B.m(D,null)))},i(t){rt(F),M||Y((()=>{M=ct(n,gt,{y:-20,duration:400}),M.start()}))},o:t,d(t){t&&w(n),J&&J.d(),F&&F.d(),B.d(),I=!1,r(T)}}}function kt(t,e,n){const o=function(){const t=L();return(e,n,{cancelable:o=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=N(e,n,{cancelable:o});return r.slice().forEach((e=>{e.call(t,s)})),!s.defaultPrevented}return!0}}();let r="",s="",l="",c=!1,a=!1;return[r,s,l,c,a,async function(){if(n(2,l=""),n(3,c=!0),!r||!s)return n(2,l="Veuillez remplir tous les champs"),void n(3,c=!1);if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r))return n(2,l="Format d'email invalide"),void n(3,c=!1);if(s.length<6)return n(2,l="Le mot de passe doit contenir au moins 6 caractères"),void n(3,c=!1);try{const t=a?"/api/auth/register":"/api/auth/login",e=await fetch(`http://localhost:5000${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:r,password:s}),credentials:"include"}),i=await e.json();if(!e.ok)return n(2,l=i.error||"Erreur de connexion"),void n(3,c=!1);if(a)return n(4,a=!1),n(0,r=""),n(1,s=""),n(2,l=""),void n(3,c=!1);localStorage.setItem("auth_token",i.access_token),localStorage.setItem("user",JSON.stringify(i.user)),o("login-success")}catch(t){n(2,l="Erreur de serveur: "+t.message)}finally{n(3,c=!1)}},function(){n(4,a=!a),n(2,l="")},function(){r=this.value,n(0,r)},function(){s=this.value,n(1,s)}]}class qt extends pt{constructor(t){super(),ft(this,t,kt,xt,l,{})}}const _t=[];function St(e,n=t){let o;const r=new Set;function s(t){if(l(e,t)&&(e=t,o)){const t=!_t.length;for(const t of r)t[1](),_t.push(t,e);if(t){for(let t=0;t<_t.length;t+=2)_t[t][0](_t[t+1]);_t.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(l,c=t){const a=[l,c];return r.add(a),1===r.size&&(o=n(s)||t),l(e),()=>{r.delete(a),0===r.size&&o&&(o(),o=null)}}}}const Ct=St(!1),Et=St(null);function jt(){if(Ct.set(!1),Et.set(null),"undefined"==typeof window||!window.localStorage)return console.log("Environnement sans localStorage, authentification désactivée"),!1;const t=localStorage.getItem("auth_token"),e=localStorage.getItem("user");if(!t||!e)return console.log("Pas de token ou d'utilisateur en localStorage"),!1;try{const n=JSON.parse(e);fetch("http://localhost:5000/api/auth/me",{headers:{Authorization:`Bearer ${t}`}}).then((t=>t.ok?(console.log("Token validé par le backend"),Ct.set(!0),Et.set(n),!0):(console.log("Token invalide, déconnexion"),zt(),!1))).catch((t=>(console.log("Erreur de vérification du token:",t),zt(),!1)))}catch(t){return console.log("Erreur de parsing JSON:",t),zt(),!1}return!1}function zt(){console.log("Déconnexion utilisateur"),"undefined"!=typeof window&&window.localStorage&&(localStorage.removeItem("auth_token"),localStorage.removeItem("user")),Ct.set(!1),Et.set(null)}async function Ot(t,e={}){const n="undefined"!=typeof window&&window.localStorage?localStorage.getItem("auth_token"):null;n&&(e.headers={...e.headers||{},Authorization:`Bearer ${n}`});const o=await fetch(t,{...e,credentials:"include"});return 401===o.status&&(console.log("Erreur 401, déconnexion"),zt()),o}function Nt(e){let n,o,r,s,l,c;return s=new qt({}),s.$on("login-success",e[18]),{c(){var t;n=x("div"),o=x("h1"),o.textContent="ActivMap",r=q(),(t=s.$$.fragment)&&t.c(),C(o,"class","svelte-tql1o5"),C(n,"class","card svelte-tql1o5")},m(t,e){b(t,n,e),v(n,o),v(n,r),it(s,n,null),c=!0},p:t,i(t){c||(rt(s.$$.fragment,t),Y((()=>{c&&(l||(l=at(n,gt,{y:-20,duration:600},!0)),l.run(1))})),c=!0)},o(t){st(s.$$.fragment,t),l||(l=at(n,gt,{y:-20,duration:600},!1)),l.run(0),c=!1},d(t){t&&w(n),ut(s),t&&l&&l.end()}}}function Pt(t){let e,n,o,s,l,c,a,i,u,d,f,p,m,h,g,$,y,O,N,P,A,D,M,I,T,L,R,J,F,G,V,B,U,X=t[8]?.email+"",Z=t[5]&&At(),H=t[6]&&Dt(t),K=t[4]&&Mt(t);return{c(){e=x("div"),n=x("div"),o=x("span"),s=k("Connecté en tant que "),l=k(X),c=q(),a=x("button"),a.textContent="Déconnexion",i=q(),u=x("div"),d=x("h1"),d.textContent="Générateur de carte stylisée",f=q(),p=x("form"),m=x("label"),h=k("Latitude :\n\t\t\t\t\t"),g=x("input"),$=q(),y=x("label"),O=k("Longitude :\n\t\t\t\t\t"),N=x("input"),P=q(),A=x("label"),D=k("Distance (m) :\n\t\t\t\t\t"),M=x("input"),I=q(),T=x("button"),T.textContent="Générer la carte",L=q(),Z&&Z.c(),R=q(),H&&H.c(),F=q(),K&&K.c(),G=k(""),C(a,"class","logout-btn svelte-tql1o5"),C(n,"class","user-info svelte-tql1o5"),C(e,"class","navbar svelte-tql1o5"),C(d,"class","svelte-tql1o5"),C(g,"type","number"),C(g,"step","0.000001"),g.required=!0,C(g,"class","svelte-tql1o5"),C(m,"class","svelte-tql1o5"),C(N,"type","number"),C(N,"step","0.000001"),N.required=!0,C(N,"class","svelte-tql1o5"),C(y,"class","svelte-tql1o5"),C(M,"type","number"),M.required=!0,C(M,"class","svelte-tql1o5"),C(A,"class","svelte-tql1o5"),C(T,"type","submit"),C(T,"class","svelte-tql1o5"),C(p,"class","svelte-tql1o5"),C(u,"class","card svelte-tql1o5")},m(r,w){b(r,e,w),v(e,n),v(n,o),v(o,s),v(o,l),v(n,c),v(n,a),b(r,i,w),b(r,u,w),v(u,d),v(u,f),v(u,p),v(p,m),v(m,h),v(m,g),z(g,t[1]),v(p,$),v(p,y),v(y,O),v(y,N),z(N,t[2]),v(p,P),v(p,A),v(A,D),v(A,M),z(M,t[3]),v(p,I),v(p,T),v(u,L),Z&&Z.m(u,null),v(u,R),H&&H.m(u,null),b(r,F,w),K&&K.m(r,w),b(r,G,w),V=!0,B||(U=[_(a,"click",t[17]),_(g,"input",t[23]),_(N,"input",t[24]),_(M,"input",t[25]),_(p,"submit",S(t[9]))],B=!0)},p(t,e){(!V||256&e)&&X!==(X=t[8]?.email+"")&&j(l,X),2&e&&E(g.value)!==t[1]&&z(g,t[1]),4&e&&E(N.value)!==t[2]&&z(N,t[2]),8&e&&E(M.value)!==t[3]&&z(M,t[3]),t[5]?Z||(Z=At(),Z.c(),Z.m(u,R)):Z&&(Z.d(1),Z=null),t[6]?H?H.p(t,e):(H=Dt(t),H.c(),H.m(u,null)):H&&(H.d(1),H=null),t[4]?K?(K.p(t,e),16&e&&rt(K,1)):(K=Mt(t),K.c(),rt(K,1),K.m(G.parentNode,G)):K&&(nt(),st(K,1,1,(()=>{K=null})),ot())},i(t){V||(Y((()=>{V&&(J||(J=at(u,gt,{y:-20,duration:600},!0)),J.run(1))})),rt(K),V=!0)},o(t){J||(J=at(u,gt,{y:-20,duration:600},!1)),J.run(0),st(K),V=!1},d(t){t&&w(e),t&&w(i),t&&w(u),Z&&Z.d(),H&&H.d(),t&&J&&J.end(),t&&w(F),K&&K.d(t),t&&w(G),B=!1,r(U)}}}function At(t){let e,n,o;return{c(){e=x("div"),n=q(),o=x("p"),o.textContent="Génération en cours...",C(e,"class","loading-spinner svelte-tql1o5"),O(o,"text-align","center")},m(t,r){b(t,e,r),b(t,n,r),b(t,o,r)},d(t){t&&w(e),t&&w(n),t&&w(o)}}}function Dt(t){let e,n;return{c(){e=x("p"),n=k(t[6]),C(e,"class","error svelte-tql1o5")},m(t,o){b(t,e,o),v(e,n)},p(t,e){64&e&&j(n,t[6])},d(t){t&&w(e)}}}function Mt(t){let e,n,o,s,l,c,i,u,d,f,p,m,h,g,$,y,k,E,j,z,N,P,A;return{c(){e=x("h2"),e.textContent="Carte générée :",o=q(),s=x("div"),l=x("div"),c=x("div"),i=x("button"),i.textContent="+",u=q(),d=x("button"),d.textContent="–",f=q(),p=x("button"),p.textContent="⟳",m=q(),h=x("img"),k=q(),E=x("div"),j=x("a"),z=x("button"),z.textContent="Télécharger l'image SVG",O(e,"text-align","center"),C(e,"class","svelte-tql1o5"),C(i,"aria-label","Zoom In"),C(i,"class","svelte-tql1o5"),C(d,"aria-label","Zoom Out"),C(d,"class","svelte-tql1o5"),C(p,"aria-label","Rotate"),C(p,"class","svelte-tql1o5"),C(c,"class","zoom-controls svelte-tql1o5"),a(h.src,g=t[4])||C(h,"src",g),C(h,"alt","Carte stylisée"),C(h,"class","svelte-tql1o5"),O(h,"transform",t[7]),C(l,"class","svg-container svelte-tql1o5"),C(s,"class","card svelte-tql1o5"),C(z,"class","svelte-tql1o5"),C(j,"download","carte.svg"),C(j,"href",t[4]),C(E,"class","download-container svelte-tql1o5")},m(n,r){b(n,e,r),b(n,o,r),b(n,s,r),v(s,l),v(l,c),v(c,i),v(c,u),v(c,d),v(c,f),v(c,p),v(l,m),v(l,h),b(n,k,r),b(n,E,r),v(E,j),v(j,z),N=!0,P||(A=[_(i,"click",t[11]),_(d,"click",t[12]),_(p,"click",t[13]),_(l,"wheel",S(t[10])),_(l,"mousedown",t[14]),_(l,"mousemove",t[15]),_(l,"mouseup",t[16]),_(l,"mouseleave",t[16])],P=!0)},p(t,e){(!N||16&e&&!a(h.src,g=t[4]))&&C(h,"src",g),128&e&&O(h,"transform",t[7]),(!N||16&e)&&C(j,"href",t[4])},i(t){N||(Y((()=>{N&&(n||(n=at(e,ht,{},!0)),n.run(1))})),Y((()=>{N&&($||($=at(h,vt,{duration:400},!0)),$.run(1))})),Y((()=>{N&&(y||(y=at(s,gt,{y:20,duration:600},!0)),y.run(1))})),N=!0)},o(t){n||(n=at(e,ht,{},!1)),n.run(0),$||($=at(h,vt,{duration:400},!1)),$.run(0),y||(y=at(s,gt,{y:20,duration:600},!1)),y.run(0),N=!1},d(t){t&&w(e),t&&n&&n.end(),t&&w(o),t&&w(s),t&&$&&$.end(),t&&y&&y.end(),t&&w(k),t&&w(E),P=!1,r(A)}}}function It(t){let e,n,o,r;const s=[Pt,Nt],l=[];function c(t,e){return t[0]?0:1}return n=c(t),o=l[n]=s[n](t),{c(){e=x("main"),o.c(),C(e,"class","svelte-tql1o5")},m(t,o){b(t,e,o),l[n].m(e,null),r=!0},p(t,[r]){let a=n;n=c(t),n===a?l[n].p(t,r):(nt(),st(l[a],1,1,(()=>{l[a]=null})),ot(),o=l[n],o?o.p(t,r):(o=l[n]=s[n](t),o.c()),rt(o,1),o.m(e,null))},i(t){r||(rt(o),r=!0)},o(t){st(o),r=!1},d(t){t&&w(e),l[n].d()}}}function Tt(t,e,n){let o,r,s;i(t,Ct,(t=>n(0,r=t))),i(t,Et,(t=>n(8,s=t)));let l=49.444838,c=1.094214,a=150,u="",d=!1,f="",p=1,m=0,h=0,g=0,v=!1,$=0,y=0,b=0,w=0;var x;return x=()=>{jt()},L().$$.on_mount.push(x),t.$$.update=()=>{1&t.$$.dirty&&console.log("État d'authentification:",r),7864320&t.$$.dirty&&n(7,o=`translate(${h}px, ${g}px) rotate(${m}deg) scale(${p})`)},[r,l,c,a,u,d,f,o,s,async function(){n(5,d=!0),n(6,f=""),n(4,u=""),n(19,p=1),n(20,m=0),n(21,h=0),n(22,g=0);try{const e=await Ot("http://localhost:5000/generate-map",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({latitude:l,longitude:c,distance:a})});if(e.ok){const t=await e.blob();n(4,u=URL.createObjectURL(t))}else if(401===e.status)n(6,f="Vous devez être connecté pour générer une carte."),r=!1,t=r,Ct.set(t);else{const t=await e.json();n(6,f=t.error||"Erreur lors de la génération de la carte.")}}catch(t){n(6,f="Erreur réseau : "+t)}finally{n(5,d=!1)}var t},function(t){t.preventDefault(),t.deltaY<0?n(19,p=Math.min(3,1.1*p)):n(19,p=Math.max(.5,p/1.1))},function(){n(19,p=Math.min(3,1.1*p))},function(){n(19,p=Math.max(.5,p/1.1))},function(){n(20,m+=15)},function(t){v=!0,$=t.clientX,y=t.clientY,b=h,w=g},function(t){if(v){const e=t.clientX-$,o=t.clientY-y;n(21,h=b+e),n(22,g=w+o)}},function(){v=!1},function(){zt(),n(4,u="")},function(){jt()},p,m,h,g,function(){l=E(this.value),n(1,l)},function(){c=E(this.value),n(2,c)},function(){a=E(this.value),n(3,a)}]}return new class extends pt{constructor(t){super(),ft(this,t,Tt,It,l,{})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
